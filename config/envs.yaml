custom_envs:
  SimpleSokoban:
    env_type: sokoban
    max_actions_per_traj: 10 # used in environment state manager to control the actual max actions executed per trajectory
    env_instruction: |
      You are solving the Sokoban puzzle. 
      You are the player and you need to push all boxes to targets. 
      When you are right next to a box, you can push it by moving in the same direction. 
      You cannot push a box through a wall, and you cannot pull a box. 
      The answer should be a sequence of actions, like <answer>Right || Right || Up</answer>
    max_tokens: 100 # used to curate llm prompt "max words", not used for rollout
    parallel_friendly: false
    max_workers: 32
    env_config: # keys should be a subset of SokobanConfig
      dim_x: 6
      dim_y: 6
      num_boxes: 1
      max_steps: 100

  LargerSokoban:
    env_type: sokoban
    max_actions_per_traj: 10
    env_instruction: |
      You are solving the Sokoban puzzle. 
      You are the player and you need to push all boxes to targets. 
      When you are right next to a box, you can push it by moving in the same direction. 
      You cannot push a box through a wall, and you cannot pull a box. 
      The answer should be a sequence of actions, like <answer>Right || Right || Up</answer>
    max_tokens: 100
    parallel_friendly: false
    max_workers: 32
    env_config:
      dim_x: 8
      dim_y: 8
      num_boxes: 2
      max_steps: 100
      search_depth: 10
  
  SokobanDifferentGridVocab:
    env_type: sokoban
    max_actions_per_traj: 10
    env_instruction: |
      You are solving the Sokoban puzzle. 
      You are the player and you need to push all boxes to targets. 
      When you are right next to a box, you can push it by moving in the same direction. 
      You cannot push a box through a wall, and you cannot pull a box. 
      The answer should be a sequence of actions, like <answer>Right || Right || Up</answer>
    max_tokens: 100
    parallel_friendly: false
    max_workers: 32
    env_config: # keys should be a subset of SokobanConfig
      search_depth: 30
      dim_x: 6
      dim_y: 6
      num_boxes: 1
      max_steps: 100
      grid_lookup: {0: "W", 1: ".", 2: "G", 3: "C", 4: "B", 5: "A", 6: "@"}
      grid_vocab: {"W": "wall", ".": "empty", "G": "target", "C": "box on target", "B": "box", "A": "player", "@": "player on target"}

  CoordSokoban:
    env_type: sokoban
    max_actions_per_traj: 10
    env_instruction: |
      You are solving the Sokoban puzzle. You are the player and you need to push all boxes to targets.
      You are provided with a symbol grid and the zero-indexed coordinates of the player, each box, and each target. 
      Coordinates range from the top-left corner (0, 0) to the bottom-right corner (5, 5). 
      When you are exactly next to a box, you can push it by moving in the same direction. 
      You cannot push a box through a wall, and you cannot pull a box.
      The answer should be a sequence of actions, like <answer>Right || Right || Up</answer>.
    max_tokens: 120
    parallel_friendly: false
    max_workers: 32
    env_config: # keys should be a subset of SokobanConfig
      dim_x: 6
      dim_y: 6
      num_boxes: 1
      max_steps: 100
      observation_format: "grid_coord"

  VisualSimpleSokoban:
    env_type: sokoban
    max_actions_per_traj: 10
    env_instruction: "You are solving the Sokoban puzzle. You are the player and you need to push all boxes to targets. When you are right next to a box, you can push it by moving in the same direction. You cannot push a box through a wall, and you cannot pull a box. The answer should be a sequence of actions, like <answer>Right || Right || Up</answer>"
    max_tokens: 100
    parallel_friendly: false
    max_workers: 32
    env_config: # keys should be a subset of SokobanConfig
      dim_x: 6
      dim_y: 6
      num_boxes: 1
      max_steps: 100
      render_mode: "rgb_array"

  # Alfworld:
  #   env_type: alfworld
  #   env_instruction: "You are solving the Alfworld puzzle. "
  #   env_config: null

  Countdown:
    env_type: countdown
    max_actions_per_traj: 1
    env_instruction: "You are solving the Countdown puzzle. You should use the num list to create an equation that equals the target. Example answer format: <think> To find an equation using [3, 5, 2] to get 4. Let's check 2 + 5 = 7, 7 - 3 = 4. So the answer is 2 + 5 - 3 = 4. </think><answer>2 + 5 - 3</answer>"
    max_tokens: 100
    parallel_friendly: false
    max_workers: 32
    env_config: null

  Bandit:
    env_type: bandit
    max_actions_per_traj: 1
    env_instruction: ""
    max_tokens: 100
    parallel_friendly: false
    max_workers: 32
    env_config: 
      split: "train"

  BanditTest:
    env_type: bandit
    max_actions_per_traj: 1
    env_instruction: ""
    max_tokens: 100
    parallel_friendly: false
    max_workers: 32
    env_config: 
      split: "test"

  FrozenLake:
    env_type: frozen_lake
    max_actions_per_traj: 10
    env_instruction: "You are solving the FrozenLake puzzle. Forbid the whole and go to the target. You may move to the unintended direction due to the slippery ice. Example answer format: <think>To forbid the hole and go to the target, I should go left then go up.</think><answer>Left || Up</answer>"
    max_tokens: 100
    parallel_friendly: false
    max_workers: 32
    env_config: null

  CoordFrozenLake:
    env_type: frozen_lake
    max_actions_per_traj: 10
    env_instruction: |
      You are solving the FrozenLake puzzle. The observation includes both a symbol grid and zero-indexed coordinates for the start, goal, player, and any holes.
      Coordinates range from the top-left corner (0, 0) to the bottom-right corner (5, 5).
      Beware that the ice is slippery, so the agent might slide and end up in an unintended tile.
      Respond with a sequence of actions such as <answer>Left || Up || Up</answer>.
    max_tokens: 120
    parallel_friendly: false
    max_workers: 32
    env_config:
      observation_format: "grid_coord"

  MetamathQA:
    env_type: metamathqa
    max_actions_per_traj: 1
    env_instruction: "You are solving Math problems. "
    max_tokens: 100
    env_config: null

  WebShop:
    env_type: webshop
    max_actions_per_traj: 9
    # env_instruction: "You are browsing an online shop. Based on the instruction, find the product that close to the production description. You need to read the website and decide what action to take next until buying a product. Available actions depends on the page: in the search page you can search keywords, in the search result page you can click an item url or click[next >] to navigate to next page, in the product page you can click[description] or click[features] to see the details, click[blue] or click[x-large] to choose size and colors, click[buy now] when you decided to buy the product, click[back to search] to return to search page. You should only choose action from the available actions list.  Example process: I need a gingko light and 20x20 pillow cover that is hand painted. First search[gingko light 20x20 pillow cover hand painted], answer format: <answer>search[blanket with fleece throw]</answer>. Valid answer is search[<keywords>] or click[<clickable>]."
    env_instruction: "You are browsing an online shop. Based on the instruction, buy a product that close to the production description. You need to search, read the search results, pick a product, choose the size and color and buy. You should only choose action from the available actions list provided later.  Example process: I need a gingko light and 20x20 pillow cover that is hand painted. First search[gingko light 20x20 pillow cover hand painted], answer format: <answer>search[blanket with fleece throw]</answer>. Valid answer is search[<keywords>] or click[<clickable>]."
    # env_instruction: >
    #   You are browsing an online shop. Based on the instruction, find a product
    #   that closely matches the production description. You need to iteratively take
    #   actions(search or click) in the browser and buy the chosen product.
    #   Example:
    #   WebShop [SEP] Instruction: [SEP] Find me machine wash men's dress shirts with cotton spandex, classic fit, short sleeve with color: deep atlantic, and size: large tall, and price lower than 60.00 dollars [SEP] Search
    #   Available actions: ['search[<content>]']
    #   <think>Search for the item: men's dress shirts with cotton spandex, classic fit, short sleeve. Do not search for color, size or price, because they will be on the search result or product page</think><answer>search[men's dress shirts with cotton spandex, classic fit, short sleeve]</answer>
    #   Instruction: [SEP] Find me machine wash men's dress shirts with cotton spandex, classic fit, short sleeve with color: deep atlantic, and size: large tall, and price lower than 60.00 dollars [SEP] Back to Search [SEP] Page 1 (Total results: 1) [SEP] Next > [SEP] B09M63B87V [SEP] YALFJV Women Long Sleeve Crew Neck Side Button T Shirts Tunic Dress Loose Asymmetric Hem Tunic Pullover to Wear with Leggings [SEP] $10.71 to $18.34
    #   <think>The product on this page is for women. None of the products are close to the description. Click next page to see more products.</think><answer>click[next >]</answer>
    #   Instruction: [SEP] Find me machine wash men's dress shirts with cotton spandex, classic fit, short sleeve with color: deep atlantic, and size: large tall, and price lower than 60.00 dollars [SEP] Back to Search [SEP] Page 2 (Total results: 2) [SEP] B07HRFSNL4 [SEP] Nautica Men's Solid Crew Neck Short-Sleeve Pocket T-Shirt [SEP] $16.05 to $40.98 [SEP] B07N7TDKXQ [SEP] SOCKS'NBULK Mens Cotton Crew Neck Short Sleeve T-Shirts Mix Colors Bulk [SEP] $80.79 to $172.8
    #   Available actions: ['click[back to search]', 'click[< prev]', 'click[next >]', 'click[b07hrfsnl4]', 'click[b07n7tdkxq]']
    #   <think>The B07HRFSNL4 products seems close to the description, and with the price range. Click it.</think><answer>click[b07hrfsnl4]</answer>
    #   Instruction: [SEP] Find me machine wash men's dress shirts with cotton spandex, classic fit, short sleeve with color: deep atlantic, and size: large tall, and price lower than 60.00 dollars [SEP] Back to Search [SEP] < Prev [SEP] size [SEP] x-small [SEP] small [SEP] large tall [SEP] color [SEP] navy [SEP] deep atlantic [SEP] deep atlantic
    #   Available actions: ['click[back to search]', 'click[< prev]', 'click[description]', 'click[features]', 'click[reviews]', 'click[buy now]', 'click[x-small]', 'click[small]', 'click[large tall]', 'click[navy]', 'click[deep atlantic]']
    #   <think>I need to choose the right size. Click large tall</think><answer>click[large tall]</answer>
    #   Instruction: [SEP] Find me machine wash men's dress shirts with cotton spandex, classic fit, short sleeve with color: deep atlantic, and size: large tall, and price lower than 60.00 dollars [SEP] Back to Search [SEP] < Prev [SEP] size [SEP] x-small [SEP] small [SEP] large tall [SEP] color [SEP] navy [SEP] deep atlantic [SEP] deep atlantic
    #   Available actions: ['click[back to search]', 'click[< prev]', 'click[description]', 'click[features]', 'click[reviews]', 'click[buy now]', 'click[x-small]', 'click[small]', 'click[large tall]', 'click[navy]', 'click[deep atlantic]']
    #   <think>Now I need to choose the right color. Click deep atlantic</think><answer>click[deep atlantic]</answer>
    #   Instruction: [SEP] Find me machine wash men's dress shirts with cotton spandex, classic fit, short sleeve with color: deep atlantic, and size: large tall, and price lower than 60.00 dollars [SEP] Back to Search [SEP] < Prev [SEP] size [SEP] x-small [SEP] small [SEP] large tall [SEP] color [SEP] navy [SEP] deep atlantic [SEP] deep atlantic
    #   Available actions: ['click[back to search]', 'click[< prev]', 'click[description]', 'click[features]', 'click[reviews]', 'click[buy now]', 'click[x-small]', 'click[small]', 'click[large tall]', 'click[navy]', 'click[deep atlantic]']
    #   <think>Having selected the size and color, I am ready to buy. Click buy now.</think><answer>click[buy now]</answer>

    # You are browsing an online shop. Based on the instruction, find the product 
    # that best matches the production description. You need to iteratively take 
    # actions(search or click) in the browser and buy the chosen product. Example 
    # process: 
    # Instruction: Find me machine wash men's t-shirts with long sleeve with color: black, and size: xx-large big tall, and price lower than 50.00 dollars
    # WebShop [SEP] Instruction: [SEP] Find me machine wash men's t-shirts with long sleeve with color: black, and size: xx-large big tall, and price lower than 50.00 dollars [SEP] Search
    # Available actions: ['search[<content>]']
    # <think>First search for the big catagory: machine wash men's t-shirts with long sleeve. Do not search for color, size or price, because they will be on the search result or product page</think><answer>search[machine wash men's t-shirts with long sleeve]</answer>
    # Instruction: [SEP] Find me machine wash men's t-shirts with long sleeve with color: black, and size: xx-large big tall, and price lower than 50.00 dollars [SEP] Back to Search [SEP] Page 1 (Total results: 50) [SEP] Next > [SEP] B09QQP3356 [SEP] HAUKLIE Men's Sports Waffle Ribbed Polo Shirts Summer Short Sleeve Cotton Muscle Quarter-Zip Henley T-Shirt Tunics Tops [SEP] $10.99 [SEP] B09Q8RD8YN [SEP] Bungo Stray Anime Dogs Anime Character, Long Sleeve, Sweatshirt, Hoodie, T shirt [SEP] $19.99 [SEP] B09QGK5XHZ [SEP] WENKOMG1 Men's Long Sleeve Undershirt with Mask Turtleneck Hooded T-Shirt Solid Color Workout Tops Zipper Side Slit Shirts Slim Fit Sweatshirt Spring/Summer Tee Shirts(Gray,) [SEP] $8.39 [SEP] B09QQJJ3KM [SEP] One Lucky Teacher St Patrick Day Shamrock Tee Teachers Custom Personalized Unisex T-Shirts Long Sleeve Hoodie Sweatshirt Gifts [SEP] $100.0 [SEP] B09S3BN15C [SEP] Mens Linen Shirt,Men's Striped Shirts Casual Short Sleeve Button Down Shirts Regular Fit Hawaiian Shirts Beach Tees Tops [SEP] $3.78 to $11.38 [SEP] B09ND9DP7J [SEP] InterestPrint Gold Horse Pattern Men's 2-Piece Sleepwear Set, Long Sleeve Shirt with Pants Loungewear [SEP] $43.59 [SEP] B09T756KQ5 [SEP] WENKOMG1 Men's Crewneck Goth Tee Shirts Skull Print Tops Spring/Summer Long Sleeve Sports T-Shirt Baggy Y2K Soft Streetwear [SEP] $4.09 to $8.09 [SEP] B09Q67H373 [SEP] JSPOYOU 2022 Newly T-Shirt for Mens Funny 3D Graphics Pattern Crewneck Short Sleeve Tees Big and Tall Summer Casual Comfy Top [SEP] $1.99 to $8.99 [SEP] B09R9YCM6R [SEP] XXBR Summer T-shirts for Mens, Soldier Short Sleeve 3D Street Vintage Printed Shirt Slim Fit Muscle Casual Tee Tops [SEP] $8.98 to $11.99 [SEP] B09KLQLLT2 [SEP] Long Sleeve Superhero T Shirt Tank Top Mens Compression Shirt Men Workout Fitness Gym Shirt [SEP] $19.99
    # Available actions: ['click[back to search]', 'click[next >]', 'click[b09qqp3356]', 'click[b09q8rd8yn]', 'click[b09qgk5xhz]', 'click[b09qqjj3km]', 'click[b09s3bn15c]', 'click[b09nd9dp7j]', 'click[b09t756kq5]', 'click[b09q67h373]', 'click[b09r9ycm6r]', 'click[b09klqllt2]']
    # <think>Product b09klqllt2 is a Men's Long Sleeve Superhero T Shirt priced 19.99$, which satisfies my need</think><answer>click[b09klqllt2]</answer>
    # Instruction: [SEP] Find me machine wash men's t-shirts with long sleeve with color: black, and size: xx-large big tall, and price lower than 50.00 dollars [SEP] Back to Search [SEP] < Prev [SEP] color [SEP] black | blue [SEP] blue [SEP] blue | red [SEP] bronze [SEP] brown [SEP] gold [SEP] green [SEP] red [SEP] red | blue [SEP] yellow [SEP] grey | red [SEP] size [SEP] small [SEP] medium [SEP] large [SEP] x-large [SEP] xx-large [SEP] Long Sleeve Superhero T Shirt Tank Top Mens Compression Shirt Men Workout Fitness Gym Shirt [SEP] Price: $19.99 [SEP] Rating: N.A. [SEP] Description [SEP] Features [SEP] Reviews [SEP] Buy Now
    # Available actions: ['click[back to search]', 'click[< prev]', 'click[description]', 'click[features]', 'click[reviews]', 'click[buy now]', 'click[black | blue]', 'click[blue]', 'click[blue | red]', 'click[bronze]', 'click[brown]', 'click[gold]', 'click[green]', 'click[red]', 'click[red | blue]', 'click[yellow]', 'click[grey | red]', 'click[small]', 'click[medium]', 'click[large]', 'click[x-large]', 'click[xx-large]']
    # <think>Produce description and price looks good, now select the right color</think><answer>click[black | blue]</answer>
    # Instruction: [SEP] Find me machine wash men's t-shirts with long sleeve with color: black, and size: xx-large big tall, and price lower than 50.00 dollars [SEP] Back to Search [SEP] < Prev [SEP] color [SEP] black | blue [SEP] blue [SEP] blue | red [SEP] bronze [SEP] brown [SEP] gold [SEP] green [SEP] red [SEP] red | blue [SEP] yellow [SEP] grey | red [SEP] size [SEP] small [SEP] medium [SEP] large [SEP] x-large [SEP] xx-large [SEP] Long Sleeve Superhero T Shirt Tank Top Mens Compression Shirt Men Workout Fitness Gym Shirt [SEP] Price: $19.99 [SEP] Rating: N.A. [SEP] Description [SEP] Features [SEP] Reviews [SEP] Buy Now
    # Available actions: ['click[back to search]', 'click[< prev]', 'click[description]', 'click[features]', 'click[reviews]', 'click[buy now]', 'click[black | blue]', 'click[blue]', 'click[blue | red]', 'click[bronze]', 'click[brown]', 'click[gold]', 'click[green]', 'click[red]', 'click[red | blue]', 'click[yellow]', 'click[grey | red]', 'click[small]', 'click[medium]', 'click[large]', 'click[x-large]', 'click[xx-large]']
    # <think>I already selected color, now click size xx-large</think><answer>click[xx-large]</answer>
    # Instruction: [SEP] Find me machine wash men's t-shirts with long sleeve with color: black, and size: xx-large big tall, and price lower than 50.00 dollars [SEP] Back to Search [SEP] < Prev [SEP] color [SEP] black | blue [SEP] blue [SEP] blue | red [SEP] bronze [SEP] brown [SEP] gold [SEP] green [SEP] red [SEP] red | blue [SEP] yellow [SEP] grey | red [SEP] size [SEP] small [SEP] medium [SEP] large [SEP] x-large [SEP] xx-large [SEP] Long Sleeve Superhero T Shirt Tank Top Mens Compression Shirt Men Workout Fitness Gym Shirt [SEP] Price: $19.99 [SEP] Rating: N.A. [SEP] Description [SEP] Features [SEP] Reviews [SEP] Buy Now
    # Available actions: ['click[back to search]', 'click[< prev]', 'click[description]', 'click[features]', 'click[reviews]', 'click[buy now]', 'click[black | blue]', 'click[blue]', 'click[blue | red]', 'click[bronze]', 'click[brown]', 'click[gold]', 'click[green]', 'click[red]', 'click[red | blue]', 'click[yellow]', 'click[grey | red]', 'click[small]', 'click[medium]', 'click[large]', 'click[x-large]', 'click[xx-large]']
    # <think>I already selected color and size, now click buy now</think><answer>click[buy now]</answer>
    max_tokens: 200
    # env_config: null
    env_config: 
      dataset: small # choose from small or full
    #   data_path: /RAGEN-Dev/external/webshop-minimal/webshop_minimal
    #   file_path: /RAGEN-Dev/external/webshop-minimal/webshop_minimal/data/items_shuffle.json

  Lean:
    env_type: lean
    max_actions_per_traj: 50
    env_instruction: "You are a Lean theorem prover. Given a Lean theorem statement, propose a sequence of tactics that completes the proof. Think step by step about which tactics to apply next. Provide tactics separated by '||', for example <answer>intro || simp || rfl</answer>."
    max_tokens: 512
    parallel_friendly: true
    max_workers: 32
    env_config: null # Please refer to ragen/env/lean/config.py for a full list of parameters.

  SimpleSudoku:
    env_type: sudoku
    max_actions_per_traj: 20
    env_instruction: |
      You are solving a Sudoku puzzle. Fill in the grid so that every row, column, and 3x3 box contains the numbers 1-9 without repetition.
      Initial cells are shown in [brackets] and cannot be modified. Empty cells are shown as dots (.).
      Place numbers one at a time using the format: <answer>place 5 at row 2 col 3</answer> or <answer>2,3,5</answer>
      The environment will provide feedback on valid/invalid moves and show conflicts if any occur.
    max_tokens: 150
    parallel_friendly: false
    max_workers: 32
    env_config:
      grid_size: 9
      difficulty: "easy"
      render_format: "with_feedback"
      show_conflicts: true
      show_valid_numbers: true
      max_steps: 81

  MediumSudoku:
    env_type: sudoku
    max_actions_per_traj: 30
    env_instruction: |
      You are solving a Sudoku puzzle. Fill in the grid so that every row, column, and 3x3 box contains the numbers 1-9 without repetition.
      Initial cells are shown in [brackets] and cannot be modified. Empty cells are shown as dots (.).
      Place numbers one at a time using the format: <answer>place 5 at row 2 col 3</answer> or <answer>2,3,5</answer>
      The environment will provide feedback on valid/invalid moves and show conflicts if any occur.
    max_tokens: 150
    parallel_friendly: false
    max_workers: 32
    env_config:
      grid_size: 9
      difficulty: "medium"
      render_format: "with_feedback"
      show_conflicts: true
      show_valid_numbers: true
      max_steps: 81


  SPaRC:
    env_type: sparc
    max_actions_per_traj: 31
    env_instruction: |
      You are an autonomous agent controlling a path‚Äêfinding puzzle solver.
      Your goal is to find a valid path (a continuous line) from the specified Start Node to the End Node on the provided grid, adhering to all puzzle rules.

      Core Concepts & Grid Basics:
      Grid Dimensions: You can find the puzzle grid size in the info 
      Path: The solution is a single, continuous line connecting adjacent nodes either horizontally or vertically.
      Revisiting: You can not traceback your path. you can not visit a cell twice.
      Rule Cells: Cells containing rule symbols (squares, stars, etc.) have coordinates where both x and y are odd. 
      The path goes around these rule cells, never on them. They are also marked as gaps.
      Regions: The drawn path divides the grid cells into one or more distinct enclosed areas (regions). Many rules apply based on the contents of these regions.
      Valid Path Cells: The path travels along the grid lines (edges between nodes). It can only occupy positions marked `+` or `.` in the grid layout (these correspond to positions with at least one even coordinate).
      Rule Cells: Cells containing rule symbols (squares, stars, etc.) have coordinates where both `x` and `y` are odd. The path goes *around* these rule cells, never *on* them.
      Regions: The drawn path divides the grid cells into one or more distinct enclosed areas (regions). Many rules apply based on the contents of these regions.


      Symbol Legend (Grid Notation)
      *   `S`: **Start Node** (Path begins here)
      *   `E`: **End Node** (Path ends here)
      *   `V`: **Visited Node** (Path has passed through this cell)
      *   `L`: **Current Node** (Path is currently on this cell)
      *   `+`: Valid cell for the path to occupy
      *   `N`: Empty rule cell (no rule)
      *   `G`: **Gap** (Path **CANNOT** cross this cell)
      *   `.`: **Dot** (Path **MUST** pass through this cell)
      *   `o-X`: **Square** of color X
      *   `*-X`: **Star** of color X
      *   `A-X`: **Triangle** (touch 1 edge)
      *   `B-X`: **Triangle** (touch 2 edges)
      *   `C-X`: **Triangle** (touch 3 edges)
      *   `D-X`: **Triangle** (touch 4 edges)
      *   `P-X-Y`: **Polyshape** (positive) of color X and shape ID Y
      *   `Y-X-Y`: **Negative Polyshape** (ylop) of color X and shape ID Y
          
      **Color Codes:** R=Red, B=Blue, G=Green, Y=Yellow, W=White, O=Orange, P=Purple, K=Black
      
          
      Detailed Solving Rules:
      The drawn path must satisfy ALL applicable constraints:

      1.  Path Constraints:
          Path connects adjacent nodes (horizontal/vertical moves only).
          Nodes CAN NOT be revisited. You cannot visit a cell twice.
          Path MUST pass through all Dot cells.
          Path CANNOT pass through any Gap cells.

      2.  Region-Based Rules (Apply to areas enclosed by the path):
          Squares: All squares within a single region MUST be the same color. Squares of different colors MUST be separated into different regions by the path.
          Stars: Within a single region, each star symbol MUST be paired with exactly ONE other element of the same color. Other colors within the region are irrelevant to this specific star's rule.
          
          Polyshapes(poly): The region containing this symbol MUST be able to contain the specified shape (defined in Polyshape Definitions). The shape must fit entirely within the region's boundaries.
          If multiple positive polyshapes are in one region, the region must accommodate their combined, non-overlapping forms. Rotation of polyshapes is generally allowed unless context implies otherwise.
          
          Negative Polyshapes(ylop): These subtract shape requirements, typically within the same region as corresponding positive polyshapes.
          A negative polyshape cancels out a positive polyshape of the exact same shape and color within that region.
          If all positive shapes are canceled, the region has no shape constraint. A negative shape is only considered 'used' if it cancels a positive one.
          Negative shapes can sometimes rationalize apparent overlaps or boundary violations of positive shapes if interpreted as cancellations.

      3.  Path-Based Rules (Edge Touching):
          Triangles: The path MUST touch a specific number of edges of the cell containing the triangle symbol.
              (1): Path touches EXACTLY 1 edge of the triangle's cell.
              (2): Path touches EXACTLY 2 edges of the triangle's cell.
              (3): Path touches EXACTLY 3 edges of the triangle's cell.
              (4): Path touches EXACTLY 4 edges (fully surrounds) the triangle's cell.

      Polyshape Definitions: Shapes are defined by 2D arrays where 1 indicates an occupied cell and 0 indicates an empty cell. {polyshapes}

      At each turn you'll receive current Information.
      Observation: The current state of the grid, including the path and any rule cells.
      The Observation is a json string representation:
      Example observation: [["+","+","+","+","+","G","V"],["+","N",".","*-K","+","N","V"],["V","V","V","V","V","V","V"],["L","N","+","*-K","+","N","+"],["+",".","+","+","+","+","+"]]

      Also in the Observation you'll get:
      The current grid size, the current location, the current legal actions, the current step, 
      the solution count for the puzzle(how many solutions there are for the puzzle at the start), 
      the difficulty of this puzzle (scaled 1-5) and also the current rule status (which rules have been satisfied so far and which have not).

      Actions: Right, Up, Left, Down
      Keep your thinking under 500 Tokens to leave enough space for the final answer.
      You are not allowed to think for more than 500 tokens.
      Reply: <answer>Action</answer>
    max_tokens: 500
    parallel_friendly: false
    max_workers: 32
    env_config:
      max_steps: 31
      traceback: false
      observation_format: "SPaRC"
      render_mode: null